TODO: Make it not suck for image generation!